{% extends "base.html" %}

{% block title %}{{ 'تعديل' if apartment else 'إضافة' }} عقار{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; padding: 3rem 0;">
    <h1 style="margin-bottom: 2rem;">
        <i class="fas fa-{{ 'edit' if apartment else 'plus' }}"></i>
        {{ 'تعديل' if apartment else 'إضافة' }} عقار
    </h1>
    
    <div class="card">
        <div class="card-body">
            <form method="POST" enctype="multipart/form-data" 
                  action="{{ url_for('admin.edit_apartment', apartment_id=apartment.id) if apartment else url_for('admin.add_apartment') }}">
                
                <div class="form-group">
                    <label for="title" class="form-label">عنوان العقار *</label>
                    <input type="text" 
                           id="title" 
                           name="title" 
                           class="form-control" 
                           value="{{ apartment.title if apartment else '' }}"
                           required>
                </div>
                
                <div class="form-group">
                    <label for="description" class="form-label">الوصف *</label>
                    <textarea id="description" 
                              name="description" 
                              class="form-control" 
                              rows="5"
                              required>{{ apartment.description if apartment else '' }}</textarea>
                </div>
                
                <div class="grid grid-2">
                    <div class="form-group">
                        <label for="location" class="form-label">الموقع *</label>
                        <input type="text" 
                               id="location" 
                               name="location" 
                               class="form-control" 
                               value="{{ apartment.location if apartment else '' }}"
                               placeholder="مثال: الزمالك، القاهرة"
                               required>
                    </div>
                    
                    <div class="form-group">
                        <label for="image" class="form-label">صورة العقار</label>
                        <input type="file" 
                               id="image" 
                               name="image" 
                               class="form-control"
                               accept="image/*">
                        <small class="text-muted">صيغ مدعومة: JPG, PNG, WEBP</small>
                    </div>
                </div>
                
                <div class="grid grid-2">
                    <div class="form-group">
                        <label for="total_price" class="form-label">السعر الإجمالي (جنيه) *</label>
                        <input type="number" 
                               id="total_price" 
                               name="total_price" 
                               class="form-control" 
                               value="{{ apartment.total_price if apartment else '' }}"
                               min="0"
                               step="1000"
                               required>
                    </div>
                    
                    <div class="form-group">
                        <label for="total_shares" class="form-label">عدد الحصص الإجمالي *</label>
                        <input type="number" 
                               id="total_shares" 
                               name="total_shares" 
                               class="form-control" 
                               value="{{ apartment.total_shares if apartment else '' }}"
                               min="1"
                               required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="monthly_rent" class="form-label">الإيجار الشهري (جنيه) *</label>
                    <input type="number" 
                           id="monthly_rent" 
                           name="monthly_rent" 
                           class="form-control" 
                           value="{{ apartment.monthly_rent if apartment else '' }}"
                           min="0"
                           step="100"
                           required>
                </div>
                
                {% if apartment and apartment.image and apartment.image != 'default_apartment.jpg' %}
                <div class="form-group">
                    <label class="form-label">الصورة الحالية:</label>
                    <div>
                        <img src="{{ url_for('static', filename='images/apartments/' + apartment.image) }}" 
                             alt="{{ apartment.title }}"
                             style="max-width: 300px; border-radius: 8px;">
                    </div>
                </div>
                {% endif %}
                
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                    <a href="{{ url_for('admin.apartments') }}" class="btn btn-secondary">
                        <i class="fas fa-times"></i> إلغاء
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
